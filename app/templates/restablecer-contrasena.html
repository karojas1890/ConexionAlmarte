<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restablecer Contrase√±a - Conexion</title>
     <link rel="stylesheet" href="{{ url_for('static', filename='css/restablcerContraStyle.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/popupStyle.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    
    <div class="container">
        <div class="logo">
            <div class="logo-text">Conexion</div>
            <div class="logo-subtitle">Almarte</div>
        </div>

        <!-- Estado de restablecimiento -->
        <div class="reset-state" id="resetState">
            <div class="icon-container">
                <div class="icon">üîë</div>
            </div>

            <h1 class="title">Nueva Contrase√±a</h1>
            <p class="subtitle">Crea una contrase√±a segura para tu cuenta</p>

            <div class="token-status token-valid" id="tokenStatus">
                ‚úÖ Puedes restablecer tu contrase√±a
            </div>

            <form asp-controller="Auth" asp-action="Restablecer" id="resetForm">
                <div class="form-group">
                    <label class="form-label" for="newPassword">Nueva contrase√±a</label>
                    <input type="password"
                           id="newPassword"
                           name="newPassword"
                           class="form-input"
                           placeholder="Ingresa tu nueva contrase√±a"
                           required>
                    <div class="password-strength" id="passwordStrength">
                        <div class="password-strength-bar" id="passwordStrengthBar"></div>
                    </div>
                    <div class="strength-text" id="strengthText"></div>
                    <div class="error-message" id="passwordError"></div>
                    <div class="success-message" id="passwordSuccess"></div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="confirmPassword">Confirmar contrase√±a</label>
                    <input type="password"
                           id="confirmPassword"
                           class="form-input"
                           placeholder="Confirma tu nueva contrase√±a"
                           required>
                    <div class="error-message" id="confirmError"></div>
                    <div class="success-message" id="confirmSuccess"></div>
                </div>

                <div class="requirements">
                    <div class="requirements-title">Requisitos de contrase√±a:</div>
                    <div class="requirement" id="req-length">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>M√≠nimo 8 caracteres</span>
                    </div>
                    <div class="requirement" id="req-uppercase">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos una may√∫scula</span>
                    </div>
                    <div class="requirement" id="req-lowercase">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos una min√∫scula</span>
                    </div>
                    <div class="requirement" id="req-number">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos un n√∫mero</span>
                    </div>
                    <div class="requirement" id="req-special">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos un car√°cter especial</span>
                    </div>
                </div>

                <button type="submit" class="primary-btn" id="resetBtn" disabled>
                    Restablecer Contrase√±a
                </button>
            </form>

            <button class="secondary-btn" onclick="goToLogin()">
                <span class="btn-icon">‚Üê</span>
                <span>Volver al inicio de sesi√≥n</span>
            </button>
        </div>

        <!-- Estado de √©xito -->
        <div class="success-state" id="successState">
            <div class="icon-container">
                <div class="icon">‚úÖ</div>
            </div>

            <h1 class="title">¬°Contrase√±a Actualizada!</h1>
            <p class="subtitle">Tu contrase√±a ha sido restablecida exitosamente</p>

            <div class="token-status token-valid">
                üéâ Ya puedes iniciar sesi√≥n con tu nueva contrase√±a
            </div>

            <button class="primary-btn" onclick="goToLogin()">
                Iniciar Sesi√≥n
            </button>

            <div class="login-link">
                <a href="#" onclick="goToLogin()">Ir al inicio de sesi√≥n</a>
            </div>
        </div>

        <!-- Estado de enlace expirado -->
        <div class="expired-state" id="expiredState">
            <div class="icon-container">
                <div class="icon">‚è∞</div>
            </div>

            <h1 class="title">Enlace Expirado</h1>
            <p class="subtitle">Este enlace de recuperaci√≥n ya no es v√°lido</p>

            <div class="token-status token-expired">
                ‚ùå El enlace ha expirado o ya fue utilizado
            </div>

            <button class="primary-btn" onclick="requestNewLink()">
                Solicitar Nuevo Enlace
            </button>

            <a href="{{ url_for('routes.index') }}" class="secondary-btn">
                 <span class="btn-icon">‚Üê</span>
                 <span>Volver al inicio de sesi√≥n</span>
            </a>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/restablecer.js') }}" > </script>
</body>
</html>